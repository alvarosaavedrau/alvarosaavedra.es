# Terraform

En esta p치gina encontrar치s documentaci칩n y recursos que puedan ser 칰tiles sobre Terraform.

#### Generar terraform.tfvars.json desde terraform.tfvars

Imagen de docker para generar un fichero `terraform.tfvars.json` a partir de un fichero `terraform.tfvars`.

    ```shell showLineNumbers filename="> Terminal"
    docker run --rm -v $(pwd):/tmp tmccombs/hcl2json /tmp/terraform.tfvars > /tmp/terraform.tfvars.json
    ```

#### Generar README.md terraform-docs

Generar documentaci칩n en formato markdown a partir de los ficheros de terraform. Muy 칰til para mantener la documentaci칩n de un proyecto terraform de manera f치cil.

    ```shell showLineNumbers filename="> Terminal"
    docker run --rm --volume "$(pwd):/terraform-docs" -u $(id -u) quay.io/terraform-docs/terraform-docs:latest markdown /terraform-docs > README.md
    ```

#### An치lisis de c칩digo terraform con tflint

[tflint](https://github.com/terraform-linters/tflint) es una herramienta para analizar el c칩digo de terraform y detectar errores o mejoras de tu c칩digo de Terraform.

    ```shell showLineNumbers filename="> Terminal"
    docker run --rm -v $(pwd):/data -t ghcr.io/terraform-linters/tflint
    ```

#### Formatear c칩digo terraform con terraform fmt

游뚿 **춰Usa este comando antes de commitear tus cambios en el c칩digo de terraform!** Esto asegura que el c칩digo de terraform est칠 bien formateado.

    ```shell showLineNumbers filename="> Terminal"
    terraform fmt -recursive
    ```

#### Cambiar el nombre de un workspace de terraform

Ten en cuenta que el comando `terraform workspace delete -force <old-name>` **eliminar치 permanentemente** el workspace y su archivo tfvars. Aunque el archivo tfstate ya habr치 sido migrado al nuevo workspace (por lo que no se pierde), el historial del tfstate asociado al workspace original se perder치 definitivamente.

    ```shell { 5 } showLineNumbers filename="> Terminal"
    terraform workspace select <old-name>
    terraform state pull > terraform.tfstate
    terraform workspace select -or-create <new-name>
    terraform state push terraform.tfstate
    terraform workspace delete -force <old-name>
    ```